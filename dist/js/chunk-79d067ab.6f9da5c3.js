(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79d067ab"],{"06b7":function(e,t,c){"use strict";c.r(t);var a=c("7a23");const o=e=>(Object(a["pushScopeId"])("data-v-c84bc938"),e=e(),Object(a["popScopeId"])(),e),r={class:"subcategory-page"},l={class:"container"},n={class:"bread-area"},i={key:0,class:"empty-filter"},s={key:1,class:"catefilter-loading"},d={key:2,class:"product-filter-area container"},b={class:"filter-item"},u=o(()=>Object(a["createElementVNode"])("div",{class:"left-spectitle"},[Object(a["createElementVNode"])("p",{class:"ellipsis"},"品牌:")],-1)),p={class:"right-specvalue filtervalarea"},m=["onClick","title"],j={class:"left-spectitle"},O=["title"],f={class:"right-specvalue filtervalarea"},g=["title","onClick"],v={key:3,class:"product-list-area"},h={class:"producct-filter-area"},N={class:"left-area"},V=o(()=>Object(a["createElementVNode"])("span",null,"价格排序",-1)),k={class:"sorticon"},E={class:"right-area"},y={class:"product-area"};function C(e,t,c,o,C,D){const B=Object(a["resolveComponent"])("rbreaditem"),F=Object(a["resolveComponent"])("rbread"),x=Object(a["resolveComponent"])("rempty"),I=Object(a["resolveComponent"])("rcatefilteskeleton"),S=Object(a["resolveComponent"])("rcheckbox"),w=Object(a["resolveComponent"])("rgooditem"),L=Object(a["resolveComponent"])("rloadingbottom");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",r,[Object(a["createElementVNode"])("div",l,[Object(a["createElementVNode"])("div",n,[Object(a["createVNode"])(F,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(B,{to:"/"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("首页")]),_:1}),Object(a["createVNode"])(B,{to:"/category/"+o.breadData.top.id},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(o.breadData.top.name),1)]),_:1},8,["to"]),Object(a["createVNode"])(B,{to:"/category/sub/"+o.breadData.sub.id},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(o.breadData.sub.name),1)]),_:1},8,["to"])]),_:1})]),o.firstLoading&&0===o.filterListData.saleProperties.length?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",i,[Object(a["createVNode"])(x)])):Object(a["createCommentVNode"])("",!0),o.firstLoading?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",s,[Object(a["createVNode"])(I)])),o.firstLoading&&o.filterListData.saleProperties.length>0?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",d,[Object(a["createElementVNode"])("div",b,[u,Object(a["createElementVNode"])("div",p,[Object(a["createElementVNode"])("ul",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(o.filterListData.brands,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{onClick:t=>o.userSelectBrand(e),key:t,title:e.name,class:Object(a["normalizeClass"])({active:o.filterListData.brands.selectId==e.id})},Object(a["toDisplayString"])(e.name),11,m))),128))])])]),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(o.filterListData.saleProperties,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"filter-item",key:t},[Object(a["createElementVNode"])("div",j,[Object(a["createElementVNode"])("p",{class:"ellipsis",title:e.name},Object(a["toDisplayString"])(e.name)+":",9,O)]),Object(a["createElementVNode"])("div",f,[Object(a["createElementVNode"])("ul",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.properties,(t,c)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:c,title:t.name,onClick:c=>o.selectSpec(e,t),class:Object(a["normalizeClass"])({active:e.selectId==t.id})},Object(a["toDisplayString"])(t.name),11,g))),128))])])]))),128))])):Object(a["createCommentVNode"])("",!0),o.firstLoading&&o.filterListData.saleProperties.length>0?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",v,[Object(a["createElementVNode"])("div",h,[Object(a["createElementVNode"])("div",N,[Object(a["createElementVNode"])("a",{href:"javascript:",class:Object(a["normalizeClass"])({active:null===o.cateProductFilter.sortField}),onClick:t[0]||(t[0]=e=>o.selectFilter(null))},"默认排序",2),Object(a["createElementVNode"])("a",{href:"javascript:",class:Object(a["normalizeClass"])({active:"publishTime"===o.cateProductFilter.sortField}),onClick:t[1]||(t[1]=e=>o.selectFilter("publishTime"))},"最新商品",2),Object(a["createElementVNode"])("a",{href:"javascript:",class:Object(a["normalizeClass"])({active:"orderNum"===o.cateProductFilter.sortField}),onClick:t[2]||(t[2]=e=>o.selectFilter("orderNum"))},"最高人气",2),Object(a["createElementVNode"])("a",{href:"javascript:",class:Object(a["normalizeClass"])({active:"evaluateNum"===o.cateProductFilter.sortField}),onClick:t[3]||(t[3]=e=>o.selectFilter("evaluateNum"))},"评论最多",2),Object(a["createElementVNode"])("a",{href:"javascript:",class:"pricearea",onClick:t[4]||(t[4]=e=>o.selectFilter("price"))},[V,Object(a["createElementVNode"])("div",k,[Object(a["createElementVNode"])("i",{class:Object(a["normalizeClass"])(["iconfont icon-shangjiantou",{on:"asc"===o.cateProductFilter.sortMethod}])},null,2),Object(a["createElementVNode"])("i",{class:Object(a["normalizeClass"])(["iconfont icon-xiajiantou",{on:"desc"===o.cateProductFilter.sortMethod}])},null,2)])])]),Object(a["createElementVNode"])("div",E,[Object(a["createVNode"])(S,{modelValue:o.cateProductFilter.inventory,"onUpdate:modelValue":t[5]||(t[5]=e=>o.cateProductFilter.inventory=e),onChange:o.changeRightselect},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("仅显示有货商品")]),_:1},8,["modelValue","onChange"]),Object(a["createVNode"])(S,{modelValue:o.cateProductFilter.onlyDiscount,"onUpdate:modelValue":t[6]||(t[6]=e=>o.cateProductFilter.onlyDiscount=e),onChange:o.changeRightselect},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("仅显示特惠商品")]),_:1},8,["modelValue","onChange"])])]),Object(a["createElementVNode"])("div",y,[Object(a["createElementVNode"])("ul",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(o.subProductList,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:t,style:Object(a["normalizeStyle"])({margin:(t+1)%5==0?"0px":"0px 12px 40px 12px"})},[Object(a["createVNode"])(w,{goodsData:e},null,8,["goodsData"])],4))),128))]),Object(a["createVNode"])(L,{loading:o.loading,finished:o.finished,onInfiniteloadData:o.loadSubData},null,8,["loading","finished","onInfiniteloadData"])])])):Object(a["createCommentVNode"])("",!0)])])}c("3c65"),c("14d9");var D=c("6605"),B=c("5502"),F=c("c405");const x={class:"rcatefilterskeleton-component"};function I(e,t,c,o,r,l){const n=Object(a["resolveComponent"])("rskeleton");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",x,[Object(a["createVNode"])(n,{bg:"#e4e4e4",animated:"",width:"800px"}),Object(a["createVNode"])(n,{bg:"#e4e4e4",animated:"",width:"1000px"}),Object(a["createVNode"])(n,{bg:"#e4e4e4",animated:"",width:"100%"})])}var S={name:"rcatefilterskeleton"},w=(c("eca7"),c("d959")),L=c.n(w);const P=L()(S,[["render",I],["__scopeId","data-v-7da8cebc"]]);var _=P;const z=["src"],T={class:"goodsitem-name"},M={class:"goodsitem-desc ellipsis"},R={class:"goodsitem-price"};function J(e,t,c,o,r,l){const n=Object(a["resolveComponent"])("rprice");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"r-goodsitem-component",onClick:t[0]||(t[0]=e=>o.godetail(c.goodsData))},[Object(a["createElementVNode"])("img",{class:"goods-img",src:c.goodsData.picture,alt:""},null,8,z),Object(a["createElementVNode"])("div",T,Object(a["toDisplayString"])(c.goodsData.name),1),Object(a["createElementVNode"])("div",M,Object(a["toDisplayString"])(c.goodsData.desc),1),Object(a["createElementVNode"])("div",R,[Object(a["createVNode"])(n,{price:c.goodsData.price,size:"18"},null,8,["price"])])])}var U={name:"rgooditem",props:{goodsData:{type:Object,default:()=>({})}},setup(){const e=Object(D["d"])(),t=t=>{e.push({path:"/goodsdetail/"+t.id})};return{godetail:t}}};c("8b69");const A=L()(U,[["render",J],["__scopeId","data-v-07283c36"]]);var q=A,G=c("f3e2"),H=c.n(G);const K=e=>(Object(a["pushScopeId"])("data-v-4bd8269e"),e=e(),Object(a["popScopeId"])(),e),Q={class:"r-empty-componen"},W=K(()=>Object(a["createElementVNode"])("img",{src:H.a,alt:""},null,-1)),X={class:"emptytext"};function Y(e,t,c,o,r,l){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Q,[W,Object(a["createElementVNode"])("span",X,Object(a["toDisplayString"])(c.emptyText),1)])}var Z={name:"index",props:{emptyText:{type:String,default:"暂无更多数据!"}}};c("87cf");const $=L()(Z,[["render",Y],["__scopeId","data-v-4bd8269e"]]);var ee=$,te=c("c40e"),ce={name:"subcategory",setup(){const e=Object(a["ref"])([]);let t=Object(a["reactive"])({page:1,pageSize:18,categoryId:"",attrs:[],brandId:""});const c=Object(a["ref"])(!1),o=Object(a["ref"])(!1),r=Object(a["ref"])(!1),l=Object(D["c"])(),n=Object(B["b"])(),i=Object(a["computed"])(()=>{const e={};return n.state.category.cateList.forEach((t,c)=>{t.children.forEach((c,a)=>{c.id===l.params.id&&(e.sub={name:c.name,id:c.id},e.top={name:t.name,id:t.id})})}),e}),s=Object(a["ref"])({}),d=()=>{Object(F["b"])(l.params.id).then(e=>{const{result:{saleProperties:t,brands:c}}=e;c.selectId=null,c.unshift({id:null,name:"全部"}),t.forEach(e=>{e.selectId=null,e.properties.unshift({id:null,name:"全部"})}),s.value=e.result,r.value=!0})};Object(a["watch"])(()=>l.params.id,t=>{t&&"/category/sub/"+t===l.path&&(e.value=[],o.value=!1,r.value=!1,d())},{immediate:!0});const b=Object(a["reactive"])({inventory:!1,onlyDiscount:!1,sortField:null,sortMethod:null}),u=c=>{if(console.log(c),"price"!==c){if(b.sortField===c)return;b.sortField=c}else null===b.sortMethod?b.sortMethod="desc":b.sortMethod="desc"===b.sortMethod?"asc":"desc";o.value=!0,t={...b,...t},t.page=1,o.value=!1,e.value=[],p()},p=()=>{c.value=!0,t.categoryId=l.params.id,Object(te["a"])(t).then(a=>{const{result:{items:r}}=a;r.length?(e.value.push(...r),t.page++):o.value=!0,c.value=!1})},m=()=>{o.value=!0,t={...t,...b},t.page=1,o.value=!1,e.value=[],p()},j=(c,a)=>{const r=a.id;c.selectId=r,O(c,a),t={...t,...b},t.page=1,o.value=!1,e.value=[],p()},O=(e,c)=>{const a=t.attrs.findIndex(t=>t.groupName===e.name);-1!==a&&t.attrs.splice(a,1),t.attrs.push({groupName:e.name,propertyName:c.name})},f=c=>{const{id:a}=c;s.value.brands.selectId=a,t.brandId=a,t={...t,...b},t.page=1,e.value=[],o.value=!1,p()};return{breadData:i,filterListData:s,cateProductFilter:b,selectFilter:u,firstLoading:r,loading:c,finished:o,loadSubData:p,subProductList:e,changeRightselect:m,selectSpec:j,userSelectBrand:f}},components:{rcatefilteskeleton:_,rgooditem:q,rempty:ee}};c("6299");const ae=L()(ce,[["render",C],["__scopeId","data-v-c84bc938"]]);t["default"]=ae},"083a":function(e,t,c){"use strict";var a=c("0d51"),o=TypeError;e.exports=function(e,t){if(!delete e[t])throw o("Cannot delete property "+a(t)+" of "+a(e))}},"22ca":function(e,t,c){},"2be7":function(e,t,c){},"3c65":function(e,t,c){"use strict";var a=c("23e7"),o=c("7b0b"),r=c("07fa"),l=c("3a34"),n=c("083a"),i=c("3511"),s=1!==[].unshift(0),d=!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}}();a({target:"Array",proto:!0,arity:1,forced:s||d},{unshift:function(e){var t=o(this),c=r(t),a=arguments.length;if(a){i(c+a);var s=c;while(s--){var d=s+a;s in t?t[d]=t[s]:n(t,d)}for(var b=0;b<a;b++)t[b]=arguments[b]}return l(t,c+a)}})},6299:function(e,t,c){"use strict";c("2be7")},"71dd":function(e,t,c){},"87cf":function(e,t,c){"use strict";c("fc9e")},"8b69":function(e,t,c){"use strict";c("71dd")},c40e:function(e,t,c){"use strict";c.d(t,"a",(function(){return o})),c.d(t,"b",(function(){return r})),c.d(t,"d",(function(){return l})),c.d(t,"c",(function(){return n}));var a=c("b775");function o(e){return Object(a["a"])("/category/goods/temporary","post",e)}function r(e){return Object(a["a"])("/goods","get",{id:e})}function l(e,t){return Object(a["a"])("/goods/relevant","get",{id:e,limit:t})}function n(e){return Object(a["a"])("/goods/hot","get",e)}},eca7:function(e,t,c){"use strict";c("22ca")},fc9e:function(e,t,c){}}]);
//# sourceMappingURL=chunk-79d067ab.6f9da5c3.js.map